(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9215:function(e,t,s){Promise.resolve().then(s.bind(s,927))},927:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(7437),r=s(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var i=(e,t)=>{let s=(0,r.forwardRef)(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:d,children:c,...o},x)=>(0,r.createElement)("svg",{ref:x,...l,width:a,height:a,stroke:s,strokeWidth:d?24*Number(i)/Number(a):i,className:`lucide lucide-${n(e)}`,...o},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...(Array.isArray(c)?c:[c])||[]]));return s.displayName=`${e}`,s};let d=i("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),c=i("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),o=i("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),x=i("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),m=i("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),u=i("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),p=i("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),h=i("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),y=i("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),g=i("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var b=()=>{var e,t,s,l,n,i,b,f,j,v;let[N,w]=(0,r.useState)([]),[P,C]=(0,r.useState)(""),[k,S]=(0,r.useState)(!1),[I,z]=(0,r.useState)({symbol:"",price:"",quantity:""}),[A,L]=(0,r.useState)({positionId:null,quantity:"",useCustomQuantity:!1}),[q,_]=(0,r.useState)({positionId:null,quantity:""}),[M,F]=(0,r.useState)(!1),[Q,E]=(0,r.useState)({positionId:null,price:"",quantity:"",position:null}),[D,T]=(0,r.useState)(0),[O,R]=(0,r.useState)({totalCapital:12e5,buffer:2e5,maxAllocation:.25,trancheSize:125e3,maxStocks:8,maxPyramidsPerStock:3,pyramidIncrementPercent:50}),[V,W]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=O.totalCapital-O.buffer,t=Math.floor(e/O.maxStocks);t!==O.trancheSize&&R(e=>({...e,trancheSize:t}))},[O.totalCapital,O.buffer,O.maxStocks]),(0,r.useEffect)(()=>{ea("Symbol,Current_Price,Total_Quantity,Avg_Cost,Pyramid_Level\nDIXON,17512,4,16729,0\nDIXON,17512,4,17417,1\nSARDA,602,223,560.50,1\nNAVA,713,190,668.97,1\nGABRIEL,1222.54,52,1222.54,0\nIXIGO,300,210,300,0")},[]);let H=O.totalCapital-O.buffer;O.trancheSize,O.pyramidIncrementPercent;let U=e=>"₹".concat((e/1e5).toFixed(1),"L"),$=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;w(N.map(a=>{if(a.id===e&&a.pyramidCount<a.maxPyramidCount){let e,r;let l=s||a.currentPrice;t&&s?r=(e=parseInt(t))*l:e=Math.floor((r=a.baseSize*(O.pyramidIncrementPercent/100))/l);let n=a.currentSize+r,i=a.currentQuantity+e,d=H*O.maxAllocation;if(n>d)return alert("Cannot exceed ".concat(U(d)," per stock (").concat(100*O.maxAllocation,"% limit)")),a;let c=2*a.baseSize;if(n>c)return alert("Cannot exceed 200% pyramid limit of ".concat(U(c)," for this position")),a;let o=a.totalInvested+r,x=a.currentPrice*i,m=x-o;return console.log("Pyramid added to ".concat(a.symbol,":"),{oldQuantity:a.currentQuantity,newQuantity:i,pyramidQuantity:e,pyramidIncrement:r,pyramidPrice:l}),{...a,currentSize:n,currentQuantity:i,pyramidCount:a.pyramidCount+1,totalInvested:o,pnl:m,pnlPercent:m/o*100}}return a})),L({positionId:null,quantity:"",useCustomQuantity:!1}),F(!1),E({positionId:null,price:"",quantity:"",position:null})},B=(e,t)=>{let s=parseInt(t)||0;s<=0||(w(N.map(t=>{if(t.id===e){let e=s*t.currentPrice,a=H*O.maxAllocation;if(e>a)return alert("Position would exceed ".concat(U(a)," limit (").concat(100*O.maxAllocation,"%)")),t;let r=t.totalInvested/t.currentQuantity,l=s*r,n=t.currentPrice*s,i=n-l;return{...t,currentQuantity:s,currentSize:e,totalInvested:l,pnl:i,pnlPercent:i/l*100}}return t})),_({positionId:null,quantity:""}))},X=(e,t)=>{w(N.map(s=>{if(s.id===e){let e=parseFloat(t)||s.currentPrice,a=e*s.currentQuantity,r=a-s.totalInvested,l=r/s.totalInvested*100;return{...s,currentPrice:e,pnl:r,pnlPercent:l}}return s}))},Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=N.find(t=>t.id===e);s&&null!==t&&T(e=>e+t),w(N.filter(t=>t.id!==e))},G=()=>N.reduce((e,t)=>e+t.totalInvested,0),Y=()=>N.reduce((e,t)=>e+t.pnl,0),J=()=>Math.max(0,O.maxStocks-N.length),K=()=>N.reduce((e,t)=>e+t.pnl,0),ee=()=>{let e=G();return 0===e?0:(D+K())/e*100},et=e=>{w(N.map(t=>({...t,maxPyramidCount:e.maxPyramidsPerStock,pyramidCount:Math.min(t.pyramidCount,e.maxPyramidsPerStock)}))),R(e),W(!1)},es=e=>{E({positionId:e.id,price:e.currentPrice.toString(),quantity:"",position:e}),F(!0)},ea=e=>{try{let t=e.trim().split("\n"),s=t[0].split(","),a=["Symbol","Current_Price","Total_Quantity","Avg_Cost","Pyramid_Level"].every(e=>s.some(t=>t.trim().toLowerCase()===e.toLowerCase()));if(!a){alert("Invalid format. Required columns: Symbol, Current_Price, Total_Quantity, Avg_Cost, Pyramid_Level");return}let r=[],l={};for(let e=1;e<t.length;e++){let s=t[e].split(",");if(s.length<5)continue;let a=s[0].trim().toUpperCase(),r=parseFloat(s[1])||0,n=parseInt(s[2])||0,i=parseFloat(s[3])||0,d=parseInt(s[4])||0;a&&r&&n&&i&&(l[a]||(l[a]=[]),l[a].push({currentPrice:r,quantity:n,avgCost:i,pyramidLevel:d,investment:n*i}))}Object.keys(l).forEach(e=>{let t=l[e];t.sort((e,t)=>e.pyramidLevel-t.pyramidLevel);let s=t.reduce((e,t)=>e+t.quantity,0),a=t.reduce((e,t)=>e+t.investment,0),n=Math.max(...t.map(e=>e.pyramidLevel)),i=t[t.length-1].currentPrice,d=t.find(e=>0===e.pyramidLevel)||t[0],c=d.quantity,o=d.investment,x=i*s,m=x-a,u={id:Date.now()+Math.random(),symbol:e,entryPrice:a/s,currentPrice:i,baseQuantity:c,currentQuantity:s,baseSize:o,currentSize:a,pyramidCount:n,maxPyramidCount:O.maxPyramidsPerStock,totalInvested:a,pnl:m,pnlPercent:m/a*100};r.push(u),console.log("Imported ".concat(e,":"),{entries:t,totalQuantity:s,totalInvestment:a,baseQuantity:c,pyramidLevel:n})}),w(r),S(!1),C(""),r.length>0&&alert("Successfully imported ".concat(r.length," positions!"))}catch(e){alert("Error importing data. Please check the format."),console.error("Import error:",e)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Point & Figure Portfolio Tracker"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Manage your P&F positions with ",100*O.maxAllocation,"% max allocation per stock"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg transition-colors",children:"\uD83D\uDCCA Import Excel"}),(0,a.jsxs)("button",{onClick:()=>W(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[(0,a.jsx)(d,{size:16}),"Settings"]})]})]})}),k&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Import Excel Data"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paste your Excel data (CSV format):"}),(0,a.jsx)("textarea",{value:P,onChange:e=>C(e.target.value),className:"w-full h-40 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Symbol,Current_Price,Total_Quantity,Avg_Cost,Pyramid_Level   RELIANCE,2650,75,2500,2   HDFC,1580,100,1520,1"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Required Format:"}),(0,a.jsxs)("div",{className:"text-xs text-blue-800 font-mono",children:[(0,a.jsx)("div",{children:"Symbol,Current_Price,Total_Quantity,Avg_Cost,Pyramid_Level"}),(0,a.jsx)("div",{children:"DIXON,17512,4,16729,0"}),(0,a.jsx)("div",{children:"SARDA,602,223,560.50,2"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"How to Export from Excel:"}),(0,a.jsxs)("ol",{className:"text-xs text-gray-600 space-y-1",children:[(0,a.jsx)("li",{children:"1. Select your data range (including headers)"}),(0,a.jsx)("li",{children:"2. Copy (Ctrl+C)"}),(0,a.jsx)("li",{children:"3. Paste here, or Save As CSV and copy from notepad"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>{if(!P.trim()){alert("Please paste your Excel data first");return}ea(P)},disabled:!P.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"\uD83D\uDCCA Import Data"}),(0,a.jsx)("button",{onClick:()=>{S(!1),C("")},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})}),M&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Add Pyramid - ",null===(e=Q.position)||void 0===e?void 0:e.symbol]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Position:"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:["Quantity: ",null===(t=Q.position)||void 0===t?void 0:t.currentQuantity]}),(0,a.jsxs)("p",{children:["Avg Cost: ₹",Q.position?(Q.position.totalInvested/Q.position.currentQuantity).toFixed(2):0]}),(0,a.jsxs)("p",{children:["Current LTP: ₹",null===(s=Q.position)||void 0===s?void 0:s.currentPrice.toFixed(2)]}),(0,a.jsxs)("p",{children:["Invested: ",U((null===(l=Q.position)||void 0===l?void 0:l.totalInvested)||0)]}),(0,a.jsxs)("p",{children:["Pyramids: ",null===(n=Q.position)||void 0===n?void 0:n.pyramidCount,"/",null===(i=Q.position)||void 0===i?void 0:i.maxPyramidCount]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pyramid Price (₹)"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:Q.price,onChange:e=>E({...Q,price:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter pyramid price"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Price at which you want to add more shares"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity to Add"}),(0,a.jsx)("input",{type:"number",value:Q.quantity,onChange:e=>E({...Q,quantity:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter quantity"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Number of additional shares to buy"})]}),Q.price&&Q.quantity&&(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Pyramid Summary:"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,a.jsxs)("p",{children:["Investment: ",U(parseFloat(Q.price||0)*parseInt(Q.quantity||0))]}),(0,a.jsxs)("p",{children:["New Total Qty: ",((null===(b=Q.position)||void 0===b?void 0:b.currentQuantity)||0)+parseInt(Q.quantity||0)]}),(0,a.jsxs)("p",{children:["New Total Invested: ",U(((null===(f=Q.position)||void 0===f?void 0:f.totalInvested)||0)+parseFloat(Q.price||0)*parseInt(Q.quantity||0))]}),(0,a.jsxs)("p",{children:["New Avg Cost: ₹",Q.position&&Q.price&&Q.quantity?((Q.position.totalInvested+parseFloat(Q.price)*parseInt(Q.quantity))/(Q.position.currentQuantity+parseInt(Q.quantity))).toFixed(2):0]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsxs)("button",{onClick:()=>{Q.price&&Q.quantity&&$(Q.positionId,Q.quantity,parseFloat(Q.price))},disabled:!Q.price||!Q.quantity||(null===(j=Q.position)||void 0===j?void 0:j.pyramidCount)>=(null===(v=Q.position)||void 0===v?void 0:v.maxPyramidCount),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[(0,a.jsx)(c,{size:16}),"Add Pyramid"]}),(0,a.jsx)("button",{onClick:()=>F(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})}),V&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Portfolio Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Capital (₹)"}),(0,a.jsx)("input",{type:"number",value:O.totalCapital,onChange:e=>R({...O,totalCapital:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"1200000"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"e.g., 1200000 for ₹12 lakhs"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buffer Amount (₹)"}),(0,a.jsx)("input",{type:"number",value:O.buffer,onChange:e=>R({...O,buffer:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"200000"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"e.g., 200000 for ₹2 lakhs buffer"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Allocation per Stock (%)"}),(0,a.jsx)("input",{type:"number",value:100*O.maxAllocation,onChange:e=>R({...O,maxAllocation:(parseFloat(e.target.value)||0)/100}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"20",min:"1",max:"100"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum % of trading capital per stock"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Stocks in Portfolio"}),(0,a.jsx)("input",{type:"number",value:O.maxStocks,onChange:e=>R({...O,maxStocks:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"8",min:"1",max:"20"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of different stocks you can hold"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tranche Size (Auto-Calculated)"}),(0,a.jsx)("input",{type:"number",value:O.trancheSize,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed",disabled:!0}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Auto-calculated: Trading Capital \xf7 Max Stocks = ",U(O.trancheSize)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Pyramids per Stock"}),(0,a.jsx)("input",{type:"number",value:O.maxPyramidsPerStock,onChange:e=>R({...O,maxPyramidsPerStock:parseInt(e.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"5",min:"1",max:"10"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of pyramids allowed per stock"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pyramid Increment (%)"}),(0,a.jsx)("input",{type:"number",value:O.pyramidIncrementPercent,onChange:e=>R({...O,pyramidIncrementPercent:parseFloat(e.target.value)||50}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"50",min:"1",max:"100"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"% of base position for each pyramid (e.g., 50% means ₹50k for ₹1L base)"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Calculated Values:"}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Trading Capital: ",U(O.totalCapital-O.buffer)]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Max Stocks: ",O.maxStocks]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Tranche Size: ",U(O.trancheSize)]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Max per Stock: ",U((O.totalCapital-O.buffer)*O.maxAllocation)]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Pyramid Increment: ",U(O.trancheSize*(O.pyramidIncrementPercent/100))]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Max Pyramided Position: ",U(2*O.trancheSize)," (200% limit)"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsxs)("button",{onClick:()=>et(O),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,a.jsx)(o,{size:16}),"Save Settings"]}),(0,a.jsx)("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Capital"}),(0,a.jsx)("p",{className:"text-xl font-bold text-blue-600",children:U(O.totalCapital)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["(",U(O.buffer)," buffer)"]})]}),(0,a.jsx)(x,{className:"text-blue-500",size:24})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Invested"}),(0,a.jsx)("p",{className:"text-xl font-bold text-green-600",children:U(G())}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(G()/H*100).toFixed(1),"% utilized"]})]}),(0,a.jsx)(m,{className:"text-green-500",size:24})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Available"}),(0,a.jsx)("p",{className:"text-xl font-bold text-purple-600",children:U(H-G())}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Max ",J()," more stocks"]})]}),(0,a.jsx)(c,{className:"text-purple-500",size:24})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Unrealized P&L"}),(0,a.jsxs)("p",{className:"text-xl font-bold ".concat(K()>=0?"text-green-600":"text-red-600"),children:[K()>=0?"+":"-","₹",Math.abs(K()).toLocaleString("en-IN")]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[G()>0?(K()/G()*100).toFixed(2):0,"%"]})]}),K()>=0?(0,a.jsx)(m,{className:"text-green-500",size:24}):(0,a.jsx)(u,{className:"text-red-500",size:24})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total ROI"}),(0,a.jsxs)("p",{className:"text-xl font-bold ".concat(ee()>=0?"text-green-600":"text-red-600"),children:[ee()>=0?"+":"",ee().toFixed(2),"%"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Realized: ₹",Math.abs(D).toLocaleString("en-IN")]})]}),ee()>=0?(0,a.jsx)(m,{className:"text-green-500",size:24}):(0,a.jsx)(u,{className:"text-red-500",size:24})]})})]}),N.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"P&L Contribution Analysis"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-3 text-gray-800",children:"Stock-wise P&L Contribution"}),(0,a.jsx)("div",{className:"space-y-3",children:N.map(e=>{let t=Y(),s=0!==t?e.pnl/t*100:0,r=e.pnl>=0;return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-800",children:e.symbol}),(0,a.jsxs)("span",{className:"text-sm px-2 py-1 rounded-full ".concat(r?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:[e.pnlPercent>=0?"+":"",e.pnlPercent.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"font-medium ".concat(r?"text-green-600":"text-red-600"),children:[e.pnl>=0?"+":"-","₹",Math.abs(e.pnl).toLocaleString("en-IN")]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:(0,a.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat(r?"bg-green-500":"bg-red-500"),style:{width:"".concat(Math.abs(s),"%"),marginLeft:s<0?"".concat(100-Math.abs(s),"%"):"0"}})}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:["Contribution to Portfolio P&L: ",Math.abs(s).toFixed(1),"%"]}),(0,a.jsxs)("span",{children:["Weight: ",(e.totalInvested/G()*100).toFixed(1),"%"]})]})]},e.id)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-3 text-gray-800",children:"P&L Performance Summary"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-red-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 mb-3",children:"Winners vs Losers"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsxs)("span",{className:"text-sm text-green-700 font-medium",children:["Winners (",N.filter(e=>e.pnl>0).length,")"]}),(0,a.jsxs)("span",{className:"text-sm text-green-600 font-medium",children:["+₹",N.filter(e=>e.pnl>0).reduce((e,t)=>e+t.pnl,0).toLocaleString("en-IN")]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(N.filter(e=>e.pnl>0).length/N.length*100,"%")}})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsxs)("span",{className:"text-sm text-red-700 font-medium",children:["Losers (",N.filter(e=>e.pnl<0).length,")"]}),(0,a.jsxs)("span",{className:"text-sm text-red-600 font-medium",children:["-₹",Math.abs(N.filter(e=>e.pnl<0).reduce((e,t)=>e+t.pnl,0)).toLocaleString("en-IN")]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-red-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(N.filter(e=>e.pnl<0).length/N.length*100,"%")}})})]})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"\uD83C\uDFC6 Top Performer"}),(()=>{let e=N.reduce((e,t)=>t.pnlPercent>e.pnlPercent?t:e,N[0]);return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-green-700",children:e.symbol}),(0,a.jsxs)("div",{className:"text-sm text-green-600",children:["+₹",e.pnl.toLocaleString("en-IN")," • ",e.pnlPercent.toFixed(1),"% gain"]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Weight: ",(e.totalInvested/G()*100).toFixed(1),"%"]})})]})})()]}),N.some(e=>e.pnl<0)&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-red-800 mb-2",children:"⚠️ Needs Attention"}),(()=>{let e=N.reduce((e,t)=>t.pnlPercent<e.pnlPercent?t:e,N[0]);return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-red-700",children:e.symbol}),(0,a.jsxs)("div",{className:"text-sm text-red-600",children:["-₹",Math.abs(e.pnl).toLocaleString("en-IN")," • ",e.pnlPercent.toFixed(1),"% loss"]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Weight: ",(e.totalInvested/G()*100).toFixed(1),"%"]})})]})})()]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDCCA Portfolio Health"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Positions in Profit:"}),(0,a.jsxs)("span",{className:"font-medium text-blue-600",children:[N.filter(e=>e.pnl>0).length," of ",N.length]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Avg Position Size:"}),(0,a.jsx)("span",{className:"font-medium text-blue-600",children:U(G()/N.length)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Portfolio Concentration:"}),(0,a.jsx)("span",{className:"font-medium text-blue-600",children:(()=>{let e=Math.max(...N.map(e=>e.totalInvested/G()*100));return e>30?"High":e>20?"Moderate":"Low"})()})]})]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add New Position"}),(0,a.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Symbol"}),(0,a.jsx)("input",{type:"text",value:I.symbol,onChange:e=>z({...I,symbol:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., RELIANCE"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Price (₹)"}),(0,a.jsx)("input",{type:"number",value:I.price,onChange:e=>z({...I,price:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"2500"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,a.jsx)("input",{type:"number",value:I.quantity,onChange:e=>z({...I,quantity:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"40",required:!0})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("button",{onClick:()=>{if(!I.symbol||!I.price||!I.quantity)return;if(N.length>=O.maxStocks){alert("Cannot exceed maximum of ".concat(O.maxStocks," stocks in portfolio"));return}let e=parseInt(I.quantity),t=e*parseFloat(I.price),s=H*O.maxAllocation;if(t>s){alert("Position size ₹".concat((t/1e5).toFixed(1),"L exceeds maximum allocation of ").concat(U(s)," (").concat(100*O.maxAllocation,"% limit)"));return}let a=2*O.trancheSize;if(t>a){alert("Position size ₹".concat((t/1e5).toFixed(1),"L exceeds 200% pyramid limit of ").concat(U(a)));return}let r={id:Date.now(),symbol:I.symbol.toUpperCase(),entryPrice:parseFloat(I.price),currentPrice:parseFloat(I.price),baseQuantity:e,currentQuantity:e,baseSize:t,currentSize:t,pyramidCount:0,maxPyramidCount:O.maxPyramidsPerStock,totalInvested:t,pnl:0,pnlPercent:0};w([...N,r]),z({symbol:"",price:"",quantity:""})},disabled:!I.symbol||!I.price||!I.quantity,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,a.jsx)(c,{size:16}),"Add Position"]}),I.price&&I.quantity&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1 text-center",children:["Size: ",U(parseFloat(I.price)*parseInt(I.quantity||0))]})]})]}),0===J()&&(0,a.jsxs)("p",{className:"text-red-600 text-sm mt-2",children:["Portfolio full - maximum ",O.maxStocks," stocks reached"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("h2",{className:"text-xl font-semibold",children:["Current Positions (",N.length,")"]})}),0===N.length?(0,a.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,a.jsx)(m,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No positions yet. Add your first P&F position above."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Entry Price"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"LTP"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invested"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Current Value"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"P&L"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:N.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap font-medium text-gray-900",children:e.symbol}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-gray-700",children:(0,a.jsxs)("span",{className:"text-sm",children:["₹",e.entryPrice.toFixed(2)]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsx)("input",{type:"number",step:"0.01",value:e.currentPrice||"",onChange:t=>X(e.id,t.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter LTP"})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-gray-700",children:q.positionId===e.id?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("input",{type:"number",value:q.quantity,onChange:e=>_({...q,quantity:e.target.value}),className:"w-16 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Qty",autoFocus:!0}),(0,a.jsx)("button",{onClick:()=>B(e.id,q.quantity),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:(0,a.jsx)(p,{size:14})}),(0,a.jsx)("button",{onClick:()=>_({positionId:null,quantity:""}),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Cancel",children:(0,a.jsx)(h,{size:14})})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"font-medium",children:e.currentQuantity}),e.pyramidCount>0&&(0,a.jsxs)("div",{className:"text-xs text-blue-600",children:["Base: ",e.baseQuantity]})]}),(0,a.jsx)("button",{onClick:()=>_({positionId:e.id,quantity:e.currentQuantity.toString()}),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Edit quantity",children:(0,a.jsx)(y,{size:12})})]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-gray-700",children:U(e.totalInvested)}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-gray-700",children:U(e.currentPrice*e.currentQuantity)}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:e.pnl>=0?"text-green-600":"text-red-600",children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.pnl>=0?"+":"-","₹",Math.abs(e.pnl).toLocaleString("en-IN")]}),(0,a.jsxs)("div",{className:"text-xs",children:["(",e.pnlPercent>=0?"+":"",e.pnlPercent.toFixed(2),"%)"]})]})}),(0,a.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>es(e),disabled:e.pyramidCount>=e.maxPyramidCount,className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-1",children:[(0,a.jsx)(c,{size:12}),"Pyramid"]}),(0,a.jsxs)("button",{onClick:()=>Z(e.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700 flex items-center gap-1",children:[(0,a.jsx)(g,{size:12}),"Close"]})]})})]},e.id))})]})})]})]})})}},622:function(e,t,s){"use strict";var a=s(2265),r=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),n=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var a,d={},c=null,o=null;for(a in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(o=t.ref),t)l.call(t,a)&&!i.hasOwnProperty(a)&&(d[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===d[a]&&(d[a]=t[a]);return{$$typeof:r,type:e,key:c,ref:o,props:d,_owner:n.current}}t.jsx=d,t.jsxs=d},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=9215)}),_N_E=e.O()}]);